{% extends "radio_base.html" %}

{% load time_extras %}

{% block content %}
    <table class="zebra-striped bordered-table condensed-table" id="search-results">
        <thead>
            <tr>
                <th class="songid">ID</th>
                <th class="info">Artist - Title</th>
                <th class="last">Last played</th>
                <th class="last">Last requested</th>
                <th class="request">Request</th>
            </tr>
        </thead>
        <tbody>
    {% if query %}
            {% for result in page.object_list %}
            <tr>
                <td>{{ result.object.id }}</td>
                <td>{{ result.object.artist.name }} - <b>{{ result.object.title }}</b></td>
                <td>{{ result.object.last_played|search_time_format }}</td>
                <td>{{ result.object.last_requested|search_time_format }}</td>
                <td>
                    <form method="POST" action="/request/" name="requestform">
                        <input type="hidden" value="{{ result.object.id }}" name="songid">
                        <input class="btn info" type="submit" value="Request">
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        {% include "pagination.html" %}
    {% else %}
        {% for object in latest_additions %}
        <tr>
            <td>{{ object.id }}</td>
            <td>{{ object.artist.name }} - <b>{{ object.title }}</b></td>
            <td>{{ object.last_played|search_time_format }}</td>
            <td>
                <form method="POST" action="/request/" name="requestform">
                    <input type="hidden" value="{{ object.id }}" name="songid">
                    <input class="btn info" type="submit" value="Request">
                </form>
            </td>
        </tr>
        {% endfor %}
    {% endif %}
    </table>
{% endblock content %}
